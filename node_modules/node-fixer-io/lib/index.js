var request = require('request');
var rates = {};
module.exports = {
    get: function (callback) {
        request('http://api.fixer.io/latest', function (error, response, body) {
            if (!error && response.statusCode == 200) {
                rates = JSON.parse(body);
                base = rates.base;
                rates = rates.rates;
                rates[base] = 1;
                callback(error, response, body);
            }
        })
    },
    allowedRates: function () {
        return Object.keys(rates);
    },
    convert: function (fromCurrency, toCurrency, amount) {
        return ((amount / rates[fromCurrency]).toFixed(4) * rates[toCurrency]).toFixed(4);
        //console.log(rates);
    }
}